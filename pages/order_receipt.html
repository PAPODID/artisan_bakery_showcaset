<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reçu de Commande - KATE'S PASTRY</title>
    <meta name="description" content="Confirmation de votre commande de viennoiseries artisanales KATE'S PASTRY." />
    <link rel="stylesheet" href="../css/main.css" />
    <style>
        @media print {
            .no-print { display: none !important; }
            .print-only { display: block !important; }
            body { background: white !important; }
            .receipt-container { box-shadow: none !important; border: 1px solid #ccc !important; }
        }
        
        .print-only { display: none; }
        
        .receipt-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .receipt-header {
            background: linear-gradient(135deg, #8B4513, #D2691E);
            color: white;
            padding: 2rem;
            text-align: center;
        }
        
        .order-number {
            background: rgba(255,255,255,0.2);
            padding: 0.5rem 1rem;
            border-radius: 25px;
            display: inline-block;
            margin-top: 1rem;
        }
        
        .receipt-content {
            padding: 2rem;
        }
        
        .info-section {
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid #eee;
        }
        
        .info-section:last-child {
            border-bottom: none;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }
        
        .product-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid #f5f5f5;
        }
        
        .product-item:last-child {
            border-bottom: none;
        }
        
        .total-section {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 2rem;
        }
        
        .success-animation {
            animation: fadeInUp 0.8s ease-out;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .btn-print {
            background: #28a745;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s;
        }
        
        .btn-print:hover {
            background: #218838;
        }
        
        .btn-download {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s;
        }
        
        .btn-download:hover {
            background: #0056b3;
        }
    </style>
</head>
<body class="bg-background text-text-primary">
    <!-- Navigation Header -->
    <header class="bg-surface shadow-soft sticky top-0 z-50 no-print">
        <nav class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <!-- Logo -->
                <div class="flex items-center space-x-3">
                    <svg class="w-10 h-10 text-accent" viewBox="0 0 40 40" fill="currentColor">
                        <path d="M20 2C15.5 2 12 5.5 12 10c0 2.5 1 4.8 2.6 6.5L20 38l5.4-21.5C27 14.8 28 12.5 28 10c0-4.5-3.5-8-8-8zm0 11c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3z"/>
                        <circle cx="20" cy="10" r="2" fill="white"/>
                    </svg>
                    <div>
                        <h1 class="font-headline text-xl font-bold text-primary">KATE'S PASTRY</h1>
                        <p class="font-accent text-sm text-accent">Tradition & Excellence</p>
                    </div>
                </div>

                <!-- Navigation Links -->
                <div class="hidden md:flex items-center space-x-8">
                    <a href="homepage.html" class="font-body font-medium text-text-secondary hover:text-accent transition-smooth">Accueil</a>
                    <a href="product_catalog.html" class="font-body font-medium text-text-secondary hover:text-accent transition-smooth">Nos Créations</a>
                    <a href="contact_location.html" class="font-body font-medium text-text-secondary hover:text-accent transition-smooth">Contact</a>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <div class="receipt-container success-animation">
            <!-- Receipt Header -->
            <div class="receipt-header">
                <h1 class="font-headline text-3xl font-bold mb-2">Commande Confirmée !</h1>
                <p class="font-accent text-xl mb-4">Merci pour votre commande</p>
                <div class="order-number">
                    <span class="font-cta font-semibold">Commande #<span id="order-number">KP-2025-001</span></span>
                </div>
            </div>

            <!-- Receipt Content -->
            <div class="receipt-content">
                <!-- Customer Information -->
                <div class="info-section">
                    <h2 class="font-headline text-xl font-bold text-primary mb-4">Informations Client</h2>
                    <div class="info-grid">
                        <div>
                            <p class="font-body text-text-secondary mb-1">Nom complet</p>
                            <p class="font-cta font-semibold text-primary" id="customer-name">Chargement...</p>
                        </div>
                        <div>
                            <p class="font-body text-text-secondary mb-1">Téléphone</p>
                            <p class="font-cta font-semibold text-primary" id="customer-phone">Chargement...</p>
                        </div>
                        <div>
                            <p class="font-body text-text-secondary mb-1">Email</p>
                            <p class="font-cta font-semibold text-primary" id="customer-email">Chargement...</p>
                        </div>
                        <div>
                            <p class="font-body text-text-secondary mb-1">Adresse</p>
                            <p class="font-cta font-semibold text-primary" id="customer-address">Chargement...</p>
                        </div>
                    </div>
                </div>

                <!-- Order Details -->
                <div class="info-section">
                    <h2 class="font-headline text-xl font-bold text-primary mb-4">Détails de la Commande</h2>
                    <div class="info-grid">
                        <div>
                            <p class="font-body text-text-secondary mb-1">Date de commande</p>
                            <p class="font-cta font-semibold text-primary" id="order-date">Chargement...</p>
                        </div>
                        <div>
                            <p class="font-body text-text-secondary mb-1">Date de réception</p>
                            <p class="font-cta font-semibold text-accent" id="delivery-date">Chargement...</p>
                        </div>
                        <div>
                            <p class="font-body text-text-secondary mb-1">Mode de livraison</p>
                            <p class="font-cta font-semibold text-primary" id="delivery-method">Chargement...</p>
                        </div>
                        <div>
                            <p class="font-body text-text-secondary mb-1">Mode de paiement</p>
                            <p class="font-cta font-semibold text-primary" id="payment-method">Chargement...</p>
                        </div>
                    </div>
                </div>

                <!-- Products Ordered -->
                <div class="info-section">
                    <h2 class="font-headline text-xl font-bold text-primary mb-4">Produits Commandés</h2>
                    <div id="products-list">
                        <!-- Products will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Order Summary -->
                <div class="total-section">
                    <div class="flex justify-between items-center mb-2">
                        <span class="font-body text-text-secondary">Sous-total</span>
                        <span class="font-cta font-semibold text-primary" id="subtotal">0 FCFA</span>
                    </div>
                    <div class="flex justify-between items-center mb-2">
                        <span class="font-body text-text-secondary">Livraison</span>
                        <span class="font-cta font-semibold text-primary" id="delivery-cost">0 FCFA</span>
                    </div>
                    <div class="flex justify-between items-center mb-2">
                        <span class="font-body text-text-secondary">TVA (18%)</span>
                        <span class="font-cta font-semibold text-primary" id="tax-amount">0 FCFA</span>
                    </div>
                    <div class="flex justify-between items-center pt-4 border-t border-border">
                        <span class="font-headline text-xl font-bold text-primary">Total</span>
                        <span class="font-headline text-2xl font-bold text-primary" id="total-amount">0 FCFA</span>
                    </div>
                </div>

                <!-- Special Instructions -->
                <div class="info-section" id="special-instructions-section" style="display: none;">
                    <h2 class="font-headline text-xl font-bold text-primary mb-4">Instructions Spéciales</h2>
                    <p class="font-body text-primary" id="special-instructions">Chargement...</p>
                </div>

                <!-- Gift Message -->
                <div class="info-section" id="gift-message-section" style="display: none;">
                    <h2 class="font-headline text-xl font-bold text-primary mb-4">Message Cadeau</h2>
                    <p class="font-body text-primary italic" id="gift-message">Chargement...</p>
                </div>

                <!-- Action Buttons -->
                <div class="flex flex-col sm:flex-row gap-4 mt-8 no-print">
                    <button onclick="printReceipt()" class="btn-print flex-1">
                        <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"/>
                        </svg>
                        Imprimer le Reçu
                    </button>
                    <button onclick="downloadReceipt()" class="btn-download flex-1">
                        <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                        Télécharger PDF
                    </button>
                </div>

                <!-- Continue Shopping -->
                <div class="text-center mt-8 no-print">
                    <a href="homepage.html" class="inline-block bg-accent text-white py-3 px-6 rounded-lg font-cta font-semibold hover:bg-accent-600 transition-smooth">
                        Continuer les Achats
                    </a>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-surface border-t border-border py-12 mt-12 no-print">
        <div class="container mx-auto px-4">
            <div class="grid md:grid-cols-4 gap-8">
                <!-- Company Info -->
                <div>
                    <h3 class="font-headline font-bold text-primary mb-4">KATE'S PASTRY</h3>
                    <p class="font-body text-text-secondary mb-4">Tradition & Excellence depuis 2010</p>
                </div>

                <!-- Contact Info -->
                <div>
                    <h4 class="font-cta font-semibold text-primary mb-4">Contact</h4>
                    <ul class="space-y-2">
                        <li class="flex items-center text-text-secondary">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                            </svg>
                            <span class="font-body">123 Avenue de la Paix, Lomé</span>
                        </li>
                        <li class="flex items-center text-text-secondary">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                            </svg>
                            <span class="font-body">+228 91 23 47 97</span>
                        </li>
                        <li class="flex items-center text-text-secondary">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                            </svg>
                            <span class="font-body">katebertrya@gmail.com</span>
                        </li>
                    </ul>
                </div>

                <!-- Business Hours -->
                <div>
                    <h4 class="font-cta font-semibold text-primary mb-4">Horaires d'Ouverture</h4>
                    <ul class="space-y-2">
                        <li class="flex justify-between text-text-secondary">
                            <span class="font-body">Lundi - Vendredi</span>
                            <span class="font-body">7h00 - 19h00</span>
                        </li>
                        <li class="flex justify-between text-text-secondary">
                            <span class="font-body">Samedi</span>
                            <span class="font-body">7h00 - 18h00</span>
                        </li>
                        <li class="flex justify-between text-text-secondary">
                            <span class="font-body">Dimanche</span>
                            <span class="font-body">8h00 - 16h00</span>
                        </li>
                    </ul>
                </div>

                <!-- Quick Links -->
                <div>
                    <h4 class="font-cta font-semibold text-primary mb-4">Liens Rapides</h4>
                    <ul class="space-y-2">
                        <li><a href="homepage.html" class="font-body text-text-secondary hover:text-accent transition-smooth">Accueil</a></li>
                        <li><a href="product_catalog.html" class="font-body text-text-secondary hover:text-accent transition-smooth">Nos Créations</a></li>
                        <li><a href="contact_location.html" class="font-body text-text-secondary hover:text-accent transition-smooth">Contact</a></li>
                    </ul>
                </div>
            </div>

            <div class="border-t border-border mt-8 pt-8 text-center">
                <p class="font-body text-text-secondary">&copy; 2025 KATE'S PASTRY. Tous droits réservés.</p>
            </div>
        </div>
    </footer>

    <script>
        // Function to populate receipt with order data
        function populateReceipt() {
            // Get order data from localStorage or URL parameters
            const orderData = JSON.parse(localStorage.getItem('orderData')) || {};
            const cartData = JSON.parse(localStorage.getItem('cartData')) || {};
            
            // Generate order number
            const orderNumber = 'KP-' + new Date().getFullYear() + '-' + String(Math.floor(Math.random() * 1000)).padStart(3, '0');
            document.getElementById('order-number').textContent = orderNumber;
            
            // Populate customer information
            document.getElementById('customer-name').textContent = `${orderData.firstName || ''} ${orderData.lastName || ''}`.trim() || 'Non spécifié';
            document.getElementById('customer-phone').textContent = orderData.phone || 'Non spécifié';
            document.getElementById('customer-email').textContent = orderData.email || 'Non spécifié';
            document.getElementById('customer-address').textContent = `${orderData.address || ''}, ${orderData.district || ''}, ${orderData.city || ''}`.trim() || 'Non spécifié';
            
            // Populate order details
            const orderDate = new Date();
            document.getElementById('order-date').textContent = orderDate.toLocaleDateString('fr-FR', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            
            document.getElementById('delivery-date').textContent = orderData.deliveryDate || 'Non spécifié';
            document.getElementById('delivery-method').textContent = getDeliveryMethodName(orderData.deliveryMethod);
            document.getElementById('payment-method').textContent = getPaymentMethodName(orderData.paymentMethod);
            
            // Populate products
            const productsList = document.getElementById('products-list');
            productsList.innerHTML = '';
            
            if (cartData.items && cartData.items.length > 0) {
                cartData.items.forEach(item => {
                    const productDiv = document.createElement('div');
                    productDiv.className = 'product-item';
                    productDiv.innerHTML = `
                        <div>
                            <p class="font-cta font-semibold text-primary">${item.name}</p>
                            <p class="font-body text-text-secondary">Quantité: ${item.quantity}</p>
                        </div>
                        <div class="text-right">
                            <p class="font-cta font-semibold text-primary">${item.price.toLocaleString()} FCFA</p>
                            <p class="font-body text-text-secondary">Total: ${(item.price * item.quantity).toLocaleString()} FCFA</p>
                        </div>
                    `;
                    productsList.appendChild(productDiv);
                });
            }
            
            // Populate totals
            const subtotal = cartData.subtotal || 0;
            const deliveryCost = getDeliveryCost(orderData.deliveryMethod);
            const tax = subtotal * 0.18;
            const total = subtotal + deliveryCost + tax;
            
            document.getElementById('subtotal').textContent = subtotal.toLocaleString() + ' FCFA';
            document.getElementById('delivery-cost').textContent = deliveryCost === 0 ? 'Gratuit' : deliveryCost.toLocaleString() + ' FCFA';
            document.getElementById('tax-amount').textContent = tax.toLocaleString() + ' FCFA';
            document.getElementById('total-amount').textContent = total.toLocaleString() + ' FCFA';
            
            // Populate special instructions if any
            if (orderData.instructions && orderData.instructions.trim()) {
                document.getElementById('special-instructions').textContent = orderData.instructions;
                document.getElementById('special-instructions-section').style.display = 'block';
            }
            
            // Populate gift message if any
            if (orderData.giftMessage && orderData.giftMessage.trim()) {
                document.getElementById('gift-message').textContent = orderData.giftMessage;
                document.getElementById('gift-message-section').style.display = 'block';
            }
        }
        
        // Helper functions
        function getDeliveryMethodName(method) {
            const methods = {
                'gozem': 'Gozem Express',
                'bkg': 'Bkg Standard',
                'ole': 'Olé Économique',
                'pickup': 'Retrait en Boutique'
            };
            return methods[method] || 'Non spécifié';
        }
        
        function getPaymentMethodName(method) {
            const methods = {
                'mobile-money': 'Mobile Money',
                'card': 'Carte Bancaire',
                'cash': 'Paiement à la Livraison'
            };
            return methods[method] || 'Non spécifié';
        }
        
        function getDeliveryCost(method) {
            const costs = {
                'gozem': 1500,
                'bkg': 1200,
                'ole': 800,
                'pickup': 0
            };
            return costs[method] || 0;
        }
        
        // Print receipt function
        function printReceipt() {
            window.print();
        }
        
        // Download receipt as PDF function
        function downloadReceipt() {
            // This would typically use a library like jsPDF
            // For now, we'll just trigger the print dialog
            alert('Fonctionnalité de téléchargement PDF en cours de développement. Utilisez la fonction d\'impression pour sauvegarder en PDF.');
            window.print();
        }
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            populateReceipt();
        });
    </script>
</body>
</html>
